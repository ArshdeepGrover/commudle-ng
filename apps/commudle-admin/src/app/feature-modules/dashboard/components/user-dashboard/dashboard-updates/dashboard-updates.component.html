<nb-card>
  <nb-card-header (click)="togglePostContentDropdown()"
    ><h2>Post a content<fa-icon class="plus-icon" [icon]="faPlus"></fa-icon></h2>
  </nb-card-header>
  <nb-card-body class="main-body">
    <nb-card *ngIf="isPostContentOpen" class="post-content">
      <nb-card-body>
        <div class="content-list">
          <a [routerLink]="['/builds/create']" class="publish-build"
            ><button nbButton>
              <fa-icon class="icon" [icon]="faLightbulb"></fa-icon><span>Publish A Project</span>
            </button></a
          >
          <a [routerLink]="['/labs/create']" class="publish-lab"
            ><button nbButton><fa-icon [icon]="faFlask"></fa-icon><span>Publish A Lab</span></button></a
          >

          <a [routerLink]="['/users', 'Prerna']" [fragment]="'content'" class="upload-content"
            ><button nbButton><fa-icon [icon]="faFileText"></fa-icon><span>Upload an External Content</span></button></a
          >
        </div>
      </nb-card-body>
    </nb-card>
    <div class="tabs">
      <button
        nbButton
        status="basic"
        [class.active]="activeTab === 'channel'"
        size="small"
        shape="round"
        (click)="setActiveTab('channel')"
      >
        Channel Updates
      </button>
      <button
        nbButton
        status="basic"
        size="small"
        shape="round"
        [class.active]="activeTab === 'registrations'"
        (click)="setActiveTab('registrations')"
      >
        Registrations
      </button>
    </div>
    <nb-card *ngIf="activeTab === 'registrations'" class="registrations">
      <nb-card-body>
        <h2 class="event-registration-heading">Your Registrations</h2>
        <div class="event-registrations">
          <div class="registration-grid">
            <div class="registration-header">
              <div class="table-heading">Name</div>
              <div class="table-heading">Type</div>
              <div class="table-heading">Your Status</div>
              <div class="table-heading">Action</div>
            </div>
            <div *ngFor="let registration of myRegistrations; let i = index" class="registration-row">
              <div class="event-title-date">
                <span class="event-title">
                  <fa-icon *ngIf="registration.registration_for === 'hackathon'" [icon]="faTrophy"></fa-icon
                  >{{ registration.event.name }}</span
                >
                <span class="date-desktop">{{ moment(registration.event.start_time).format('Do MMMM, YYYY') }}</span>
              </div>
              <div class="table-type">{{ registration.registration_for }}</div>
              <span class="date-mobile">{{ moment(registration.event.start_time).format('Do MMMM, YYYY') }}</span>
              <div
                [ngClass]="{
                  confirmed: ERegistrationStatuses.CONFIRMED === registration.registration_status,
                  registered: ERegistrationStatuses.REGISTERED === registration.registration_status,
                  waiting: ERegistrationStatuses.WAITING === registration.registration_status,
                  shortlisted: ERegistrationStatuses.SHORTLISTED === registration.registration_status,
                  cancelled: ERegistrationStatuses.CANCELLED === registration.registration_status
                }"
                class="table-status"
              >
                {{
                  registration.registration_for === 'hackathon' ? registration.status : registration.registration_status
                }}
                <span *ngIf="registration.registration_for === 'hackathon'" class="individual-status"
                  >Application Incomplete</span
                >
              </div>
              <div>
                <button
                  *ngIf="registration.entry_pass"
                  nbButton
                  status="primary"
                  shape="round"
                  size="tiny"
                  (click)="toggleEntryPass(i, registration.entry_pass.unique_code)"
                >
                  View Pass
                </button>
              </div>
            </div>
            <a class="view-all" nbButton routerLink="registrations" shape="semi-round" status="info" size="tiny">
              View all
              <nb-icon icon="arrow-forward"></nb-icon>
            </a>
          </div>
          <div *ngFor="let registration of myRegistrations; let i = index">
            <div *ngIf="showEntryPass[i]" class="qr-code">
              <nb-card>
                <nb-card-body>
                  <canvas #qrCanvas></canvas>
                  <p>{{ registration.event.name }}</p>
                </nb-card-body>
              </nb-card>
            </div>
          </div>
        </div>
      </nb-card-body>
    </nb-card>
    <nb-card class="channel-updates" *ngIf="activeTab === 'channel'">
      <nb-card-body>
        <div class="badge-and-messages">
          <!-- <div *ngIf="community" class="community-badge">
            <app-community-badge [community]="community" [size]="'small'"></app-community-badge>
          </div> -->
          <div class="channel-update">
            <div class="channel-name">
              <fa-icon [icon]="faBullhorn"></fa-icon>
              <h2>GDG New Delhi Designers</h2>
            </div>
            <div class="channel-new-messages">
              <fa-icon [icon]="faComments"></fa-icon>
              <h2>18+ messages</h2>
            </div>
          </div>
        </div>
      </nb-card-body>
    </nb-card>
  </nb-card-body>
</nb-card>
