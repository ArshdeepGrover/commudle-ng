<!-- <ng-template #dialog let-data let-ref="dialogRef">
    <nb-card class="image-popup">
      <nb-card-header style="align-self: flex-end">
        <nb-icon (click)="ref.close()" icon="close"></nb-icon>
      </nb-card-header>
      <nb-card-body>
        <img [src]="src" [alt]="lab.name" class="Image" />
      </nb-card-body>
    </nb-card>
  </ng-template> -->

<!--  -->
<div class="reading-book">
  <div class="base-layout">
    <div class="container commudle-agencies">
      <div class="two-column-layout thin">
        <div class="right-column">
          <div *ngIf="chapterIndexes">
            <commudle-reading-book-index [chapterIndexes]="chapterIndexes"></commudle-reading-book-index>
          </div>
          <button nbButton status="primary" size="large" class="download-pdf">
            <fa-icon [icon]="faDownload"></fa-icon>Download PDF
          </button>
        </div>
        <div class="main-column">
          <div class="content">
            <div *ngIf="chapterData">
              <h1 class="chapter-name">{{ chapterData.chapter_name }}</h1>
              <!-- <app-loading-spinner *ngIf="isLoading"></app-loading-spinner> -->
              <nb-card>
                <nb-card-header>
                  <div class="image">
                    <h1>Image</h1>
                    <!-- <img
                      alt="{{ chapterData.chapter_name }}"
                      [src]="imageUrl(chapterData.headerImage).url()"
                      title="{{ chapterData.chapter_name }}"
                    /> -->
                  </div>
                </nb-card-header>
                <nb-card-body *ngIf="richText">
                  <article>
                    <!-- !com-prose !com-prose-sm  -->
                    <div [innerHTML]="richText" class="!com-max-w-full content"></div>
                  </article>
                </nb-card-body>
              </nb-card>
            </div>
            <div class="footer">
              <button
                nbButton
                size="large"
                [routerLink]="
                  chapterData?.link_to_previous_page ? ['/reading-book', chapterData.link_to_previous_page] : null
                "
                [disabled]="!chapterData?.link_to_previous_page"
                class="prev-btn"
              >
                <span>
                  <nb-icon icon="arrow-back"></nb-icon>
                  Prev
                </span>
              </button>
              <!-- <button
            (click)="changeStep(-1)"
            *ngIf="selectedLabStep !== -1"
            [routerLink]="selectedLabStep === 0 ? [] : ['steps', this.lab.lab_steps[selectedLabStep - 1].id]"
            nbButton
          > -->
              <button
                nbButton
                size="large"
                [routerLink]="chapterData?.link_to_next_page ? ['/reading-book', chapterData.link_to_next_page] : null"
                [disabled]="!chapterData?.link_to_next_page"
                class="next-btn"
              >
                <span>
                  Next
                  <nb-icon icon="arrow-forward"></nb-icon>
                </span>
              </button>
              <!-- (click)="changeStep(1)"
          *ngIf="selectedLabStep < lab.lab_steps.length - 1"
          [routerLink]="['steps', this.lab.lab_steps[selectedLabStep + 1].id]" -->
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
