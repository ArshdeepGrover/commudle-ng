<section class="com-p-4">
  <div class="com-flex com-justify-end com-my-3">
    <button nbButton status="success" (click)="connectStripeAccount()" [disabled]="isLoading">Stripe Connect</button>
  </div>

  <div *ngIf="isLoading">
    <p class="com-text-center com-font-bold">Connecting to Stripe Account......</p>
    <app-loading-spinner></app-loading-spinner>
  </div>

  <app-loading-spinner *ngIf="isUpdating"></app-loading-spinner>

  <table *ngIf="stripeAccounts.length > 0" class="com-mt-4">
    <tr>
      <th>Active</th>
      <th>Acc no</th>
      <th>Charges Enabled</th>
      <th>Payouts Enabled</th>
      <th>Bank Details</th>
    </tr>
    <tr *ngFor="let stripeAccount of stripeAccounts">
      <td>
        <p>{{ stripeAccount.active }}</p>
      </td>
      <td>
        <p>{{ stripeAccount.details.id }}</p>
      </td>
      <td>
        <p>{{ stripeAccount.details.charges_enabled }}</p>
      </td>
      <td>
        <p>{{ stripeAccount.details.payouts_enabled }}</p>
      </td>
      <td>
        <div *ngIf="stripeAccount.details.external_accounts.data.length >= 1">
          <details *ngFor="let bankDetails of stripeAccount.details.external_accounts.data">
            <summary>{{ bankDetails.bank_name }}</summary>
            <p>
              Account Number: <span>{{ bankDetails.routing_number }}</span>
              <br />
              <span>{{ bankDetails.account_holder_name }}</span>
              <br />
              <span>{{ bankDetails.currency | uppercase }}</span>
            </p>
          </details>
        </div>
        <div *ngIf="stripeAccount.details.external_accounts.data.length <= 0">
          <strong> No Band Details Found </strong>
        </div>
      </td>
    </tr>
  </table>
</section>
