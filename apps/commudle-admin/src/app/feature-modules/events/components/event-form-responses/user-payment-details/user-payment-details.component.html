<table class="data" *ngFor="let detail of eto">
  <tr>
    <td>Status</td>
    <td>{{ detail.status | capitalizeAndRemoveUnderscore }}</td>
  </tr>
  <tr>
    <td>Amount Paid</td>
    <td>{{ detail.currency === 'inr' ? '₹' : '$' }} {{ detail.total_amount / 100 }}</td>
  </tr>

  <tr>
    <td>Tax Amount</td>
    <td>{{ detail.currency === 'inr' ? '₹' : '$' }} {{ detail.tax_amount / 100 }}</td>
  </tr>

  <tr *ngIf="detail.discount_amount > 0">
    <td>Discount Amount</td>
    <td>{{ detail.currency === 'inr' ? '₹' : '$' }} {{ detail.discount_amount / 100 }}</td>
  </tr>
  <tr>
    <td>Users</td>
    <td class="com-flex com-flex-col" *ngFor="let etoUser of detail.eto_users">
      <span *ngIf="detail.user.id === etoUser.user_id">Paid By:</span>
      <span class="com-text-xs">{{ etoUser.name }}</span>
      <span class="com-text-xs">{{ etoUser.email }}</span>
      <span class="com-text-xs">{{ etoUser.phone }}</span>
    </td>
  </tr>
  <div class="com-mt-4" *ngIf="detail.status === 'paid'">
    <button nbButton (click)="checkRefund(detail.uuid)">Create Refund</button>
  </div>
</table>

<ng-template #refundDialogBox let-data let-ref="dialogRef">
  <nb-card>
    <nb-card-body>
      <div class="com-font-semibold">Refund Amount: {{ refundAmount / 100 }}</div>
      <p>Are you sure you want to create refund!</p>
      <span class="com-italic">This action can't be done once processed</span>
    </nb-card-body>
    <nb-card-footer class="com-flex com-justify-between">
      <button nbButton (click)="createRefund(data); ref.close()" status="primary">Yes</button>
      <button nbButton status="danger" outline (click)="ref.close()">No</button>
    </nb-card-footer>
  </nb-card>
</ng-template>
