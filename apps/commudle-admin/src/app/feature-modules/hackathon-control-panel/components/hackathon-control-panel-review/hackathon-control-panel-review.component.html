<nb-card>
  <nb-card-body>
    <table>
      <tr>
        <th width="500px">Name</th>
        <th width="200px">Updates</th>
        <th width="200px">Note</th>
        <th>Application Status</th>
      </tr>
      <tr
        *ngFor="let userResponse of userResponses; let i = index"
        (click)="openDialogBox(userResponseDetailsDialogBox, userResponse.team.id, i)"
      >
        <td class="name">
          <div class="team-details">
            <div class="team-name">
              {{ userResponse.team.name }}
            </div>
            <div class="date">
              {{ moment(userResponse.team.created_at).format('DD MMM YYYY') }}
            </div>
          </div>
          <div *ngIf="userResponse.team.round" class="round-name">
            {{ userResponse.team.round?.name }}
          </div>
        </td>
        <td></td>
        <td></td>
        <td (click)="$event.stopPropagation()" class="com-cursor-pointer">
          <div
            [class]="EHackathonRegistrationStatusColor[userResponse.team.registration_status]"
            class="select-wrapper"
          >
            <select
              (change)="optionChanged($event, userResponse.team.id, i)"
              [(ngModel)]="userResponse.team.registration_status"
              [class]="EHackathonRegistrationStatusColor[userResponse.team.registration_status]"
            >
              <option
                *ngFor="let registrationStatus of EHackathonRegistrationStatus | keyvalue"
                [value]="registrationStatus.value"
              >
                {{ registrationStatus.value | titlecase }}
              </option>
            </select>
          </div>
        </td>
      </tr>
    </table>
  </nb-card-body>
</nb-card>

<ng-template #userResponseDetailsDialogBox let-ref="dialogRef" let-data>
  <nb-card class="response-dialog-box">
    <nb-card-body>
      <div class="action-buttons">
        <button
          nbButton
          status="primary"
          fullWidth
          (click)="optionChanged(EHackathonRegistrationStatus.ACCEPTED, data.team.id, data.index); ref.close()"
        >
          Accepted
        </button>
        <button
          nbButton
          status="danger"
          fullWidth
          (click)="optionChanged(EHackathonRegistrationStatus.REJECTED, data.team.id, data.index); ref.close()"
        >
          Reject
        </button>
        <button
          nbButton
          status="warning"
          fullWidth
          (click)="optionChanged(EHackathonRegistrationStatus.WAITLISTED, data.team.id, data.index); ref.close()"
        >
          Waitlist
        </button>
      </div>
      <div class="round-select" *ngIf="data.team.registration_status === EHackathonRegistrationStatus.ACCEPTED">
        <select (change)="changeRoundOption($event, data.team.id, data.index)" [(ngModel)]="data.team.round.id">
          <option *ngFor="let hackathonRound of hackathonRounds" [value]="hackathonRound.id">
            {{ hackathonRound.name }}
          </option>
        </select>
      </div>
    </nb-card-body>
  </nb-card>
</ng-template>
