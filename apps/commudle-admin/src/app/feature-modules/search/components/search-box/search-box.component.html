<!-- <nb-form-field [ngClass]="{ hide: !searchStatus && !overrideSearchStatus }">
  <nb-icon icon="search-outline" nbPrefix></nb-icon>
  <input
    #searchInput
    (keyup.enter)="onSubmit()"
    [fieldSize]="overrideSearchStatus ? 'giant' : 'medium'"
    [formControl]="inputFormControl"
    [nbAutocomplete]="showSuggestions ? autoComplete : loading"
    [ngClass]="{ giant: overrideSearchStatus }"
    [overlayOffset]="0"
    [shape]="shape"
    class="main-search-bar"
    fullWidth
    nbInput
    placeholder="Search react, gdg, design, tutorials"
    type="text"
  />
</nb-form-field>

<nb-autocomplete #loading></nb-autocomplete>


<nb-autocomplete #autoComplete  (selectedChange)="navigate($event)"
  [handleDisplayFn]="handleDisplay" optionsListClass="search-autocomplete">
  <!-- *ngIf="searchLoader"
  <nb-option class="search-placeholder loading-spinner">
    <div class="spinner">
      <div *ngFor="let _ of [].constructor(5)"></div>
    </div>
  </nb-option>
  *ngIf="inputFormControl.value?.length === 0" 
  <nb-option class="search-placeholder">
    Quickly search your favorite topics, labs by industry experts or find an event you missed
  </nb-option>
   <nb-option *ngIf="total === 0 && !searchLoader" class="search-placeholder">No results found</nb-option>
  <nb-option-group *ngFor="let group of groupedResults | keyvalue" [title]="group.key" class="search-results-group">
    <nb-option *ngFor="let option of group.value" [value]="option">
      <a [routerLink]="getRoute(option)" class="navigate">
        <nb-user [name]="option.name" [picture]="getPicture(option)" [showTitle]="false"></nb-user>
      </a>
    </nb-option>
  </nb-option-group>
  <nb-option
    *ngIf="total > 0"
    [value]="{ type: 'all', name: 'See all results', query: inputFormControl.value?.name || inputFormControl.value }"
    class="com-justify-center com-items-center com-gap-2"
  >
    Show all results
    <nb-icon icon="arrow-forward-outline"></nb-icon>
  </nb-option> 
</nb-autocomplete>
-->

<nb-form-field [ngClass]="{ hide: !searchStatus && !overrideSearchStatus }">
  <nb-icon icon="search-outline" nbPrefix></nb-icon>
  <!-- #searchInput
(keyup.enter)="onSubmit()" -->
  <form [formGroup]="inputFormControl">
    <input
      #searchInput
      (keyup.enter)="onSubmit()"
      [fieldSize]="overrideSearchStatus ? 'giant' : 'medium'"
      [ngClass]="{ giant: overrideSearchStatus }"
      [nbAutocomplete]="showSuggestions ? autoComplete : loading"
      [shape]="shape"
      [overlayOffset]="0"
      class="main-search-bar"
      fullWidth
      nbInput
      placeholder="Search react, gdg, design, tutorials"
      type="text"
      formControlName="name"
    />
  </form>
</nb-form-field>

<nb-autocomplete #loading> </nb-autocomplete>

<!-- (selectedChange)="navigate($event)"
[handleDisplayFn]="handleDisplay" -->
<!-- optionsListClass="search-autocomplete" -->
<nb-autocomplete #autoComplete>
  <nb-option *ngIf="searchLoader" class="loader search-box">
    <app-loading-spinner></app-loading-spinner>
  </nb-option>
  <!-- *ngIf="inputFormControl.value?.length === 0" -->
  <nb-option *ngIf="total < 0 && !searchLoader" class="search-placeholder search-box">
    Quickly search your favorite topics, labs by industry experts or find an event you missed
  </nb-option>
  <nb-option *ngIf="total === 0 && !searchLoader" class="search-placeholder search-box">No results found</nb-option>
  <nb-option *ngIf="total > 0 && !searchLoader" class="search-box-results">
    <div class="results">
      <div *ngIf="users && users.length > 0" class="container">
        <p>Users</p>
        <div *ngFor="let user of users">
          <a class="navigate" [routerLink]="['/users', user.username]">
            <img [src]="user.avatar" alt="{{ user.name }}" class="user-image" />
            <p class="name">{{ user.name }}</p>
            <p class="designation">
              <span class="dot"> &nbsp;路&nbsp; </span> {{ user.designation ? user.designation : '--' }}
            </p>
          </a>
        </div>
      </div>
      <div *ngIf="communities && communities.length > 0" class="container">
        <p>Community</p>
        <div *ngFor="let community of communities">
          <a class="navigate" [routerLink]="['/communities', community.slug]">
            <img [src]="community.logo_image?.i32" alt="{{ community.name }}" class="community-image" />
            <p class="name">{{ community.name }}</p>
            <!-- <p class="member-count"><span> 路 </span>{{ community.member_count }} <span class="member-count">Members</span></p> -->
            <p class="member-count"><span class="dot"> &nbsp;路&nbsp; </span> {{ community.member_count }} Members</p>
          </a>
        </div>
      </div>
      <div *ngIf="labs && labs.length > 0" class="container">
        <p>Labs</p>
        <div *ngFor="let lab of labs">
          <a class="navigate" [routerLink]="['/labs', lab.slug]">
            <img
              [src]="lab.header_image ? lab.header_image.i32 : staticAssets.community_lab_empty_state"
              alt="{{ lab.name }}"
              class="lab-image"
            />
            <p class="name">{{ lab.name }}</p>
          </a>
        </div>
      </div>
      <div *ngIf="builds && builds.length > 0" class="container">
        <p>Builds</p>
        <div *ngFor="let build of builds">
          <a class="navigate" [routerLink]="['/builds', build.slug]">
            <img
              [src]="build.images.length > 0 ? build.images[0]?.i32 : staticAssets.community_build_empty_state"
              alt="{{ build.name }}"
              class="lab-image"
            />
            <p class="name">{{ build.name }}</p>
          </a>
        </div>
      </div>
      <div *ngIf="events && events.length > 0">
        <p>Event</p>
        <div *ngFor="let event of events">
          <a class="navigate" [routerLink]="['/communities', event.kommunity_slug, 'events', event.slug]">
            <img
              [src]="event?.header_image ? event?.header_image.i32 : staticAssets.events_empty_state"
              alt="{{ event.name }}"
              class="lab-image"
            />
            <p class="name">{{ event.name }}</p>
            <p class="event-date">
              <span class="dot"> &nbsp;路&nbsp; </span> {{ moment(event.start_time).format('dddd, MMM Do, YYYY') }}
            </p>
          </a>
        </div>
      </div>
      <div *ngIf="contents && contents.length > 0">
        <p>Content</p>
        <div *ngFor="let content of contents">
          <a class="navigate" [href]="content.link" target="_blank" rel="noopener">
            <img
              [src]="content.image ? content.image.i32 : staticAssets.content_empty_state"
              alt="{{ content.name }}"
              class="content-image"
            />
            <p class="name">{{ content.title }}</p>
          </a>
        </div>
      </div>
    </div>
  </nb-option>
  <!-- [value]="{ type: 'all', name: 'See all results', query: inputFormControl.value?.name || inputFormControl.value }" -->
  <nb-option *ngIf="total > 0 && !searchLoader" (click)="onSubmit()" class="show-all-results">
    <!-- class="" -->
    Show all results
    <nb-icon icon="arrow-forward-outline"></nb-icon>
  </nb-option>
</nb-autocomplete>

<!-- <div *ngFor="let result of searchResults">
  <ng-container [ngSwitch]="result.type">
    <div *ngSwitchCase="'Community'">
      <h2>Community</h2>
      <div>{{ result.value.name }}</div>
    </div>
    <div *ngSwitchCase="'Event'">
      <h2>Event</h2>
      <div>{{ result.value.name }}</div>
    </div>
    <div *ngSwitchCase="'Build'">
      <h2>Build</h2>
      <div>{{ result.value.name }}</div>
    </div>
  </ng-container>
</div> -->

<!-- <div *ngFor="let result of searchResults">
  <ng-container [ngSwitch]="result?.type">
    <div *ngSwitchCase="'User'">
      <p>User</p>
      <div *ngFor="let user of Users">{{ user }}</div>
    </div>
    <div *ngSwitchCase="'Community'">
      <p>Community</p>
      <div *ngFor="let community of Community">{{ community }}</div>
    </div>
   <div *ngSwitchCase="' Lab'">
      <p>Lab</p>
      <div *ngFor="let lab of searchResults">{{ lab.value?.name }}</div>
    </div>
    <div *ngSwitchCase="'Community Build'">
      <p>Build</p>
      <div *ngFor="let build of searchResults">{{ build.value?.name }}</div>
    </div>
    <div *ngSwitchCase="'Event'">
      <p>Event</p>
      <div *ngFor="let event of searchResults">{{ event.value?.name }}</div>
    </div> 
  </ng-container>
</div> -->
